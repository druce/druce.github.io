<!DOCTYPE html>
<html lang="en">

  <head>
  
  






  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Optimal certainty-equivalent spending retirements with DataNitro</title>

  <meta name="description" content="*Let’s see if we can come up with an ideal spending plan for a retirement, if you have a guaranteed annual return, for different levels of risk aversion. *">

  <meta content="StreetEYE Blog" property="og:site_name">
  
  <meta content="Optimal certainty-equivalent spending retirements with DataNitro" property="og:title">
  
  
  <meta content="article" property="og:type">
  
  
  <meta content="*Let’s see if we can come up with an ideal spending plan for a retirement, if you have a guaranteed annual return, for different levels of risk aversion. *" property="og:description">
  
  
  <meta content="http://0.0.0.0:4000/2014/01/2534/" property="og:url">
  
  
  <meta content="2014-01-08T15:57:27-05:00" property="article:published_time">
  <meta content="http://0.0.0.0:4000/about/" property="article:author">
  
  
  
  
  <meta content="investing" property="article:tag">
  
  
  <!-- Twitter cards -->
  <meta name="twitter:site"    content="@streeteye">
  <meta name="twitter:creator" content="@Druce Vertes">
  <meta name="twitter:title"   content="Optimal certainty-equivalent spending retirements with DataNitro">

  
  <meta name="twitter:description" content="
  *Let’s see if we can come up with an ideal spending plan for a retirement, if you have a guaranteed annual return, for different levels of risk aversion. *


">
  

  
  <meta name="twitter:card"  content="summary">
  <meta name="twitter:image" content="">
  
  <!-- end of Twitter cards -->

  <link rel="shortcut icon" href="/assets/favicon.ico">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="canonical" href="http://0.0.0.0:4000/2014/01/2534/">
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-E1305JTTCL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-E1305JTTCL');
  </script>

</head>


  <body>

    <header class="site-header" role="banner" id="header-bar">

  <div class="wrapper">
    
    <a class="site-title" href="/">StreetEYE Blog</a>

    <nav class="site-nav">
      <a class="page-link" href="/contact.html"><i class='fa fa-at'></i> Contact</a>
    </nav>
    
    <nav class="site-nav">
      <a class="page-link" href="/archive.html"><i class='fa fa-folder-open'></i> Archive</a>
    </nav>
    
    <nav class="site-nav">
      <a class="page-link" href="/FAQ.html"><i class='fa fa-question-circle'></i> About</a>
    </nav>
    
    <nav class="site-nav">
      <ul class="nav-items">
        <!-- Dropdown menu -->
        <li class="nav-item nav-item-dropdown">
          <a class="dropdown-trigger page-link" href="#">Projects</a>
          <ul class="dropdown-menu">
            <li class="dropdown-menu-item">
              <a href="#">Dropdown Item 1</a>
            </li>
            <li class="dropdown-menu-item">
              <a href="#">Dropdown Item 2</a>
            </li>
            <li class="dropdown-menu-item">
              <a href="#">Dropdown Item 3</a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>

  </div>
  
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Optimal certainty-equivalent spending retirements with DataNitro</h1>
    <p class="post-meta">

      <time datetime="2014-01-08T15:57:27-05:00" itemprop="datePublished">
        
        Jan 8, 2014
      </time>

      <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        by <span itemprop="name">Druce Vertes</span>
      </span>

      <span>
        
          
          <a class="post-tag" href="/tag/investing"><nobr>investing</nobr>&nbsp;</a>
        
      </span>
      <!--
      <span class="share-buttons">
        <span class="share-button"><a class="twitter-share-button" href="https://twitter.com/share" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></span>

        <span class="share-button"><span class="fb-like" data-href="/2014/01/2534/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="true"></span></span>
      </span>
      <div style="clear: both;"/>
      -->

    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <blockquote>
  <p>*Let’s see if we can come up with an ideal spending plan for a retirement, if you have a guaranteed annual return, for different levels of risk aversion. *
<!--more-->
It’s probably been done before, but seems like a fun illustration of the power of numerical optimization with Excel, Python and DataNitro.</p>
</blockquote>

<!--more-->

<p><strong>A toy problem.</strong></p>

<p>Suppose you are a 111-year-old male, and you would like to know how much to spend the rest of your retirement.</p>

<p>You look up a <a href="http://www.ssa.gov/oact/STATS/table4c6.html">life table</a> _ you see it gives you 100% probability of dying this year (rounded _ 1 life out of 10,000 survives to 111, 0 to 112)</p>

<p>How much of your portfolio should you spend this year to maximize your lifetime spending?</p>

<p><strong>The answer is obvious — 100%!</strong> There is no risk of shortfall in future years, assuming this life table holds up.</p>

<p>Now let’s suppose you are 110. According to the life table, 2 lives out of 10,000 survive to 110. One shuffles off this mortal coil at 110, the other at 111.</p>

<p>Suppose you have a guaranteed 5% real return. How much should you spend each year to maximize lifetime spending?</p>

<p>If you save $1, you can spend $1.05 if you’re still alive to spend it. But you have only a 50% chance of being alive. So every dollar you save is worth $0.525 in lifetime spending. Every dollar you spend now is worth $1.</p>

<p>So once again, you should spend the entire portfolio!</p>

<p>More generally, as long as the future value is higher than the 1/probability of being alive, you save the entire amount. As soon as the future value is less than 1/probability of being alive, you spend everything.</p>

<p>You spend everything if:</p>

<div>
  <a href="/assets/wp-content/uploads/2014/01/Capture1.png"><img src="/assets/wp-content/uploads/2014/01/Capture1.png" alt="Formula 2" width="136" height="34" class="alignleft size-full wp-image-2563" /></a>
</div>

<div style="clear:left">
  or<br /> <a href="/assets/wp-content/uploads/2014/01/Capture3.png"><img src="/assets/wp-content/uploads/2014/01/Capture3.png" alt="Capture" width="142" height="52" class="alignleft size-full wp-image-2573" /></a>
</div>

<div style="clear:left">
  &nbsp;
</div>

<p>Otherwise you spend nothing. To maximize lifetime income, you spend nothing until you reach maximum bang for the buck, so to speak, then you spend the entire portfolio.</p>

<p>Of course, in the real world, this is not a recommended or preferred retirement plan.</p>

<p><strong>The CRRA utility function</strong></p>

<p>Real people care about the variability and risk of their income stream. To quantify that, we can use a <em>constant relative risk aversion</em> (CRRA) utility function.</p>

<p>The intuition behind a CRRA utility function is that given a choice between</p>

<p>1) flipping a coin to get either $10 or $15, and</p>

<p>2) a certain $12.50,</p>

<p>the risk-averse retiree prefers a certain payoff to a risky payoff with the same expected value.</p>

<p>The form of a CRRA function is:</p>

<p><a href="/assets/wp-content/uploads/2014/01/Capture.png"><img src="/assets/wp-content/uploads/2014/01/Capture.png" alt="CRRA function" width="91" height="41" class="size-full wp-image-2542" /></a></p>

<p>Where U is utility, C is consumption (spending), and γ (gamma) is the risk-aversion coefficient.</p>

<p>A highly risk-averse person (high γ) might value the risky payoff at $11, the certainty-equivalent (CE) value of the coin-flip. A less risk-averse person might want at least $12 (γ =2), and only a risk-neutral person would accept $12.50. No rational person accepts a certain $10 v. a minimum $10 and a chance at $15.</p>

<p>Constant relative risk aversion refers to the property that the size of the bet doesn’t matter – if the certainty-equivalent value of a $100/$150 coin-flip is $120, then the CE value of a $1000/$1500 coin-flip is $1200.</p>

<p>The table below shows certainty equivalent values of a $10/$15, and $100/$150 coin flips for different levels of γ.</p>

<table style="font-size: 12px;">
  <tr>
    <td>
      CE(10,15, γ =8)
    </td>
    
    <td>
      $10.95
    </td>
  </tr>
  
  <tr>
    <td>
      CE(10,15, γ =4)
    </td>
    
    <td>
      $11.56
    </td>
  </tr>
  
  <tr>
    <td>
      CE(10,15, γ =2)
    </td>
    
    <td>
      $12.00
    </td>
  </tr>
  
  <tr>
    <td>
      CE(10,15, γ =1)
    </td>
    
    <td>
      $12.247
    </td>
  </tr>
  
  <tr>
    <td>
      CE(10,15, γ =0)
    </td>
    
    <td>
      $12.50
    </td>
  </tr>
  
  <tr>
    <td>
      &nbsp;
    </td>
    
    <td>
      &nbsp;
    </td>
  </tr>
  
  <tr>
    <td>
      CE(100,150, γ =8)
    </td>
    
    <td>
      $109.52
    </td>
  </tr>
  
  <tr>
    <td>
      CE(100,150, γ =4)
    </td>
    
    <td>
      $115.55
    </td>
  </tr>
  
  <tr>
    <td>
      CE(100,150, γ =2)
    </td>
    
    <td>
      $120.00
    </td>
  </tr>
  
  <tr>
    <td>
      CE(100,150, γ =1)
    </td>
    
    <td>
      $122.47
    </td>
  </tr>
  
  <tr>
    <td>
      CE(100,150, γ =0)
    </td>
    
    <td>
      $125.00
    </td>
  </tr>
  
  <tr>
    <td>
      &nbsp;
    </td>
    
    <td>
      &nbsp;
    </td>
  </tr>
</table>

<p>We can similarly discount an uneven stream of cash flows, ie $15 followed by $10, using the same CRRA utility function. It’s just a consistent way of discounting the variability of the income stream, either over time or a probability distribution.</p>

<p>So now, let’s evaluate that 110-year-old’s retirement for different levels of gamma. Let’s find the spending that maximizes the CRRA utility function for different levels of gamma.</p>

<table style="font-size: 12px;">
  <tr>
    <td>
      γ
    </td>
    
    <td>
      Age 110
    </td>
    
    <td>
      Age 111
    </td>
  </tr>
  
  <tr>
    <td>
      γ = 0
    </td>
    
    <td>
      100%
    </td>
    
    <td>
      0%
    </td>
  </tr>
  
  <tr>
    <td>
      γ = 1
    </td>
    
    <td>
      71.9%
    </td>
    
    <td>
      100%
    </td>
  </tr>
  
  <tr>
    <td>
      γ = 2
    </td>
    
    <td>
      62.7%
    </td>
    
    <td>
      100%
    </td>
  </tr>
  
  <tr>
    <td>
      γ = 4
    </td>
    
    <td>
      59.1%
    </td>
    
    <td>
      100%
    </td>
  </tr>
  
  <tr>
    <td>
      γ = 8
    </td>
    
    <td>
      57.2%
    </td>
    
    <td>
      100%
    </td>
  </tr>
</table>

<p> </p>

<p>We can go back further, to age 109, 108, 65, even back to age 1. Then we can plot what spending would look like for someone who starts off with a $1m portfolio at birth.</p>

<p><a href="/assets/wp-content/uploads/2014/01/Capture4.png"><img src="/assets/wp-content/uploads/2014/01/Capture4.png" alt="&#039;Optimal CE&#039; spending paths for gamma=2,4,8" width="588" height="452" class="alignleft size-full wp-image-2576" srcset="/assets/wp-content/uploads/2014/01/Capture4.png 588w, /assets/wp-content/uploads/2014/01/Capture4-300x230.png 300w" sizes="(max-width: 588px) 100vw, 588px" /></a></p>

<p>Voilà! Given a guaranteed 5% real return, and a risk aversion coefficient γ, these are the the spending paths that would have maximized CRRA utility, or certainty-equivalent spending.</p>

<p>Someone who retires at age 65, or any age, could pick the curve that matches their risk aversion, and just use the part of the curve starting at that age, prorating spending to match the size of their initial portfolio.</p>

<p>The intuition of the drop off after age 80 is, to get income at say 95, when your odds of being alive are low, you have to give up a lot of income at say 70. So if you want to maximize lifetime income, buying life insurance, joining an insurance pool and annuitizing those later years makes more sense saving for them all by yourself. Effectively, life insurance is like five people who each need $1 for the year where 20% of them are alive, so each only has to put in $0.20, and the one who lives gets the whole amount.</p>

<p>Hmmh… I wonder if it’s possible to run this same optimization without the 5% real return assumptions, but over historical stock and bond returns instead… <a href="/2014/01/optimal-certainty-equivalent-retirement-plans-part-2/">To be continued</a>.</p>

  </div>


  <div class="page-navigation">
    
      <a class="prev" href="/2013/12/bitcoin-is-the-linux-of-payments-and-its-killer-app-is-the-us-dollar/">&larr; Bitcoin is the Linux of payments. And its killer apps will be for US dollars.</a>
    

    
      <a class="next" href="/2014/01/optimal-certainty-equivalent-retirement-plans-part-2/">Retirement plans that maximize certainty-equivalent spending, part 2 &rarr;</a>
    
  </div>

  

</article>

      </div>
    </main>

    <div style="clear: both;"/>
<footer class="site-footer">
  2020 &copy; Druce Vertes | View <a href="https://github.com/druce/druce.github.io" target="_blank">this</a> on Github | <a href="/tags.html">Tags</a> | <a href="/contact.html">Contact</a> | <a href="/FAQ.html">FAQ</a>

  <p>
    <a href="/feed.xml" target="_blank">
      <img src="/assets/images/logo_rss.png" />
    </a>
    <a href="https://twitter.com/streeteye/" target="_blank">
      <img src="/assets/images/logo_twitter.png" />
    </a>
    <a href="https://github.com/druce" target="_blank">
      <img src="/assets/images/logo_github.png" />
    </a>
    <a href="https://www.linkedin.com/in/drucevertes" target="_blank">
      <img src="/assets/images/logo_github.png" />
    </a>
    
  </p>
</footer>
<!-- For Latex -->
<script type="text/javascript" id="MathJax-script" async
	src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>


  </body>

</html>
