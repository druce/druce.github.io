<!DOCTYPE html>
<html lang="en">

  <head>
    
      






    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Retirement plans that maximize certainty-equivalent spending, part 2</title>

    <meta name="description" content="Last time we solved the problem of the perfect retirement spending plan, assuming a fixed known real return, and a CRRA utility function.">

    <meta content="StreetEYE Blog" property="og:site_name">
    
        <meta content="Retirement plans that maximize certainty-equivalent spending, part 2" property="og:title">
    
    
        <meta content="article" property="og:type">
    
    
        <meta content="Last time we solved the problem of the perfect retirement spending plan, assuming a fixed known real return, and a CRRA utility function." property="og:description">
    
    
        <meta content="http://0.0.0.0:4000/2014/01/optimal-certainty-equivalent-retirement-plans-part-2/" property="og:url">
    
    
        <meta content="2014-01-19T06:43:36-05:00" property="article:published_time">
        <meta content="http://0.0.0.0:4000/about/" property="article:author">
    
    
    
        
        <meta content="investing" property="article:tag">
        
    

    <link rel="shortcut icon" href="/assets/favicon.ico">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="http://0.0.0.0:4000/2014/01/optimal-certainty-equivalent-retirement-plans-part-2/">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- For Latex -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

    <!-- Google Analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-8161570-6', 'auto');
        ga('send', 'pageview');
    </script>

    <!-- For Facebook share button -->
    <div id="fb-root"></div>
    <script>
      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.9";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>

    <!-- Twitter cards -->
    <meta name="twitter:site"    content="@streeteye">
    <meta name="twitter:creator" content="@Druce Vertes">
    <meta name="twitter:title"   content="Retirement plans that maximize certainty-equivalent spending, part 2">

    
        <meta name="twitter:description" content="
  Last time we solved the problem of the perfect retirement spending plan, assuming a fixed known real return, and a CRRA utility function.


">
    

    
        <meta name="twitter:card"  content="summary">
        <meta name="twitter:image" content="">
    
    <!-- end of Twitter cards -->

</head>


  <body>

    <header class="site-header" role="banner" id="header-bar">

    <div class="wrapper">
        
        <a class="site-title" href="/">StreetEYE Blog</a>

        <nav class="site-nav">
            <a class="page-link" href="/contact.html"><i class='fa fa-at'></i> Contact</a>
        </nav>
        <nav class="site-nav">
            <a class="page-link" href="/FAQ.html"><i class='fa fa-question-circle'></i> FAQ</a>
        </nav>
        <!-- <nav class="site-nav">
            <a class="page-link" href="/log.html">&#x231b; Log</a>
        </nav> -->
        <nav class="site-nav">
            <a class="page-link" href="/archive.html"><i class='fa fa-folder-open'></i> Archive</a>
        </nav>

    </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Retirement plans that maximize certainty-equivalent spending, part 2</h1>
    <p class="post-meta">

      <time datetime="2014-01-19T06:43:36-05:00" itemprop="datePublished">
        
        Jan 19, 2014
      </time>

      <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        by <span itemprop="name">Druce Vertes</span>
      </span>

      <span>
        
          
          <a class="post-tag" href="/tag/investing"><nobr>investing</nobr>&nbsp;</a>
        
      </span>
      <!--
      <span class="share-buttons">
        <span class="share-button"><a class="twitter-share-button" href="https://twitter.com/share" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></span>

        <span class="share-button"><span class="fb-like" data-href="/2014/01/optimal-certainty-equivalent-retirement-plans-part-2/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="true"></span></span>
      </span>
      <div style="clear: both;"/>
      -->

    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <blockquote>
  <p><em><a href="/2014/01/2534/">Last time</a> we solved the problem of the perfect retirement spending plan, assuming a fixed known real return, and a CRRA utility function</em>.
<!--more-->
This time, we’ll try to look at the problem from the other angle:</p>
</blockquote>

<ul>
  <li>Let’s assume a <strong>fixed spending schedule</strong>
    <ul>
      <li>
        <p>Then, let’s solve the problem of the perfect <strong>portfolio allocation schedule</strong> between US stocks and bonds (of course, the approach could be generalized to other/more assets) &lt;/ul&gt; 
First, a brief digression to make the case that a CRRA utility function is a good thing to use.</p>

        <p><strong>CRRA utility</strong></p>

        <p>Here is a visualization of what a CRRA utility function looks like for different levels of gamma (use the slider to see how it changes as you adjust risk aversion parameter gamma.</p>

        <p>Think of 1 as the ideal income or base case, where utility=0. With risk neutrality or gamma=0, gains and losses generate the same change in utility. As risk aversion increases and gamma goes up, small losses generate bigger and bigger drops in utility, while big gains generate smaller and smaller increases in utility. A ‘no-loss’ utility function with gamma=∞ would be utility=0 for consumption &gt;=1 and a straight line down to -∞ for consumption&lt;1. One possible objection is, OMG, <em>CRRA utility is such a strange complicated abstraction!</em> No one actually thinks that way.</p>

        <p>But we’re all used to thinking about mean-variance (or some of us, anyway). Clearly there is a tradeoff between the volatility of a portfolio, the distribution of potential outcomes, and the return we are willing to accept. So at some level a lot of our thinking about finance involves something very similar to applying a discount to future income streams based on how risky and volatile they are. That’s what the CRRA utility function does _ apply a discount based on distribution of outcomes or volatility.</p>

        <p>Another possible objection is, <em>‘utility’ is unobservable in the real world</em>.</p>

        <p>But if the utility function correctly ranks the outcomes consistently with the way a human would, at some level that’s all that matters<small><sup>1</sup></small>. The actual value is arbitrary. And as far as I know, any consistent ordinal ranking can be mapped to a cardinal utility function. And we can ask people which outcomes they prefer, either a priori asking them to rank risky outcomes to estimate their risk aversion, or simply generating CRRA-consistent retirement profiles with varying levels of risk aversion, and asking them to choose one.</p>

        <p><em>Finally, why CRRA utility?</em> The important property of CRRA utility is that it’s scale-invariant. A distribution of cashflows between 10 and 15 gets the same discount as a similar distribution between 100 and 150. So if you use a non-CRRA function, you’re going to get different answers depending on the size of the income streams that get generated.</p>

        <p>So, if we think that, to reasonable approximations, humans are risk averse, they make consistent choices about risky outcomes, and their risk aversion is scale invariant over the range of outcomes we are studying, a CRRA utility function seems like a reasonable thing to use, as an approximation that leads to a problem we can solve.</p>

        <p><strong>Optimal allocation schedules</strong></p>

        <p>Last time we looked at the problem of finding the <em>optimal spending schedule</em>, given a known future return.</p>

        <p>How do we find an <em>optimal portfolio allocation schedule</em>, given a known e.g. 25-year spending plan?</p>

        <p>What we want: the expected CE spending for a given spending schedule and equity allocation schedule.</p>

        <p>We write a function that for a given cohort, eg people who retired in 1987:</p>

        <ul>
          <li>Takes as input the equity % in each year (a 1×25 vector _ the bond% is implied as 1-equity%)</li>
          <li>Uses the known returns for the 25 years 1987-2012, and the known spending schedule, to compute the retirement cash flows</li>
          <li>Returns the certainty-equivalent cash flow for the 25-year period.</li>
        </ul>

        <p>Now that we can calculate the CE spending over 25 years, we can write a second function that</p>

        <ul>
          <li>Takes as input the cash flows for a period</li>
          <li>Uses our life table with how many people survived in each year, and computes the expected value of the CE spending that 1987 retiree would have expected across all survival scenarios. (Since some people died in each year, it’s the CE cash flow through each year <em>i</em> of retirement, weighted by the percentage of retirees who lived to year <em>i</em>)</li>
        </ul>

        <p>We can further write a third function that calls the second function on each cohort from 1926-1987, and computes the CE spending that each cohort retiring from 1926-1990 would have expected. That gives a distribution of outcomes which we also discount using the CRRA utility function, giving us what we want: the expected CE spending for someone who retired in a random year 1926-1990.</p>

        <p>So the sequence is:</p>

        <p>2×25 vector of portfolio allocations and spending %<br />
-&gt; cash flows<br />
-&gt; CE spending<br />
-&gt; expected CE spending for a cohort based on life table<br />
-&gt; expected CE spending across all cohorts and across all survival scenarios, e.g, for a random 25-year retiree at any year 1926-1987.</p>

        <p>Finally, we can systematically try a universe of allocation schedules and spending schemes and find the one that maximized the expected CE spending for someone who retired in a random year in our history.</p>

        <p>The optimal retirement plan is the one that would have maximized expected utility over all historical cohorts and survival timelines.</p>

        <p>This does not seem completely computationally intractable in this day and age, so let’s try to compute it.</p>

        <p>We add to our code from last time to</p>

        <ol>
          <li>1) find an optimal spending schedule for a fixed return (what we did last time)</li>
          <li>2) find an optimal spending schedule for a 50% equity portfolio that would have maximized CE spending using historical returns 1926-2012)</li>
          <li>3) Use gamma=4, and the fixed spending schedule we found in 2), we find the equity allocation schedule that would have maximized CE spending using historical returns 1926-2012</li>
        </ol>

        <p>In other words, to make the problem a little more tractable, first we find an optimum spending schedule for a 50% equity portfolio. Then, using that spending schedule, we find the optimal equity allocation schedule.</p>

        <p>We end up with this schedule:<br />
<small>&lt;/p&gt;</small></p>

        <table cellspacing="10">
  <tr style="text-align: right;">
    <td>
      <strong>Age</strong>
    </td>
            
    <td>
      <strong>Equity %</strong>
    </td>
            
    <td>
      <strong>Spending %</strong>
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      65
    </td>
            
    <td>
      61.5%
    </td>
            
    <td>
      5.9%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      66
    </td>
            
    <td>
      61.9%
    </td>
            
    <td>
      6.1%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      67
    </td>
            
    <td>
      70.7%
    </td>
            
    <td>
      6.3%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      68
    </td>
            
    <td>
      72.4%
    </td>
            
    <td>
      6.6%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      69
    </td>
            
    <td>
      73.2%
    </td>
            
    <td>
      6.8%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      70
    </td>
            
    <td>
      73.6%
    </td>
            
    <td>
      7.1%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      71
    </td>
            
    <td>
      83.7%
    </td>
            
    <td>
      7.4%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      72
    </td>
            
    <td>
      84.9%
    </td>
            
    <td>
      7.8%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      73
    </td>
            
    <td>
      75.1%
    </td>
            
    <td>
      8.2%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      74
    </td>
            
    <td>
      76.3%
    </td>
            
    <td>
      8.6%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      75
    </td>
            
    <td>
      80.2%
    </td>
            
    <td>
      9.1%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      76
    </td>
            
    <td>
      85.6%
    </td>
            
    <td>
      9.6%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      77
    </td>
            
    <td>
      89.7%
    </td>
            
    <td>
      10.2%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      78
    </td>
            
    <td>
      99.8%
    </td>
            
    <td>
      10.9%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      79
    </td>
            
    <td>
      96.4%
    </td>
            
    <td>
      11.7%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      80
    </td>
            
    <td>
      100.0%
    </td>
            
    <td>
      12.7%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      81
    </td>
            
    <td>
      100.0%
    </td>
            
    <td>
      13.8%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      82
    </td>
            
    <td>
      100.0%
    </td>
            
    <td>
      15.3%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      83
    </td>
            
    <td>
      100.0%
    </td>
            
    <td>
      17.1%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      84
    </td>
            
    <td>
      100.0%
    </td>
            
    <td>
      19.4%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      85
    </td>
            
    <td>
      100.0%
    </td>
            
    <td>
      22.7%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      86
    </td>
            
    <td>
      100.0%
    </td>
            
    <td>
      27.6%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      87
    </td>
            
    <td>
      100.0%
    </td>
            
    <td>
      35.7%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      88
    </td>
            
    <td>
      100.0%
    </td>
            
    <td>
      51.8%
    </td>
  </tr>
          
  <tr style="text-align: right;">
    <td>
      89
    </td>
            
    <td>
      50.0%
    </td>
            
    <td>
      100.0%
    </td>
  </tr>
</table>

        <p>
  &lt;/small&gt;
</p>

        <p>
  This is somewhat counterintuitive insofar as conventional wisdom would be to reduce equity as your time horizon shrinks.
</p>

        <p>
  Let’s look at what that expected spending profile would have looked like.
</p>

        <p>
  <strong>Actual Spending using computed schedule, 25-year retirement cohorts 1926-1987</strong>
</p>

        <p>
  <a href="/assets/wp-content/uploads/2014/01/Capture6.png"><img src="/assets/wp-content/uploads/2014/01/Capture6.png" alt="Actual Spending using computed schedule w/gamma=4, 25-year retirement cohorts 1926-1987" width="506" height="278" class="aligncenter size-full wp-image-2623" srcset="/assets/wp-content/uploads/2014/01/Capture6.png 506w, /assets/wp-content/uploads/2014/01/Capture6-300x164.png 300w" sizes="(max-width: 506px) 100vw, 506px" /></a>
</p>

        <p>
  This schedule does in fact seem to perform pretty well. Pretty high initial spending, pretty smooth outcomes, pretty good median case, not very catastrophic worst case. Assuming I had a way to annuitize my longevity risk after 90 (which only about 20% of 65-year-olds will outlive), I would be pretty OK with this range of outcomes.
</p>

        <p>
  This seems like a sound approach, and the outcome looks like the kind of solution I would be hoping to find.
</p>

        <p>
  In a future post, we’ll see if we can determine both simultaneously _ an optimal spending plan and portfolio allocation for a given level of risk aversion.
</p>

        <p>
  <small><sup>1</sup></small>If, on the other hand, humans care about things like the order in which income streams are experienced, ie you prefer an income of 10 followed by an income of 15 to the other way around, then CRRA utility is not going to capture that. Then maybe we need to move to a Kahneman-Tversky prospect theory utility function. And if people’s risk aversion changes over time, for instance at market peaks at troughs, then that’s also a problem.
</p>
      </li>
    </ul>
  </li>
</ul>

  </div>


  <div class="page-navigation">
    
      <a class="prev" href="/2014/01/2534/">&larr; Optimal certainty-equivalent spending retirements with DataNitro</a>
    

    
      <a class="next" href="/2014/01/retirement-plans-that-maximize-certainty-equivalent-spending-part-3/">Retirement plans that maximize certainty-equivalent spending (conclusion) &rarr;</a>
    
  </div>

  

</article>

      </div>
    </main>

    <div style="clear: both;"/>
<footer class="site-footer">
    2020 &copy; Druce Vertes | View <a href="https://github.com/druce/druce.github.io" target="_blank">this</a> on Github | <a href="/tags.html">Tags</a> | <a href="/contact.html">Contact</a> | <a href="/FAQ.html">FAQ</a>

    <p>
        <a href="/feed.xml" target="_blank">
            <img src="/assets/images/logo_rss.png" />
        </a>
        <a href="https://twitter.com/streeteye/" target="_blank">
            <img src="/assets/images/logo_twitter.png" />
        </a>
        <a href="https://github.com/druce" target="_blank">
            <img src="/assets/images/logo_github.png" />
        </a>
        <a href="https://www.linkedin.com/in/drucevertes" target="_blank">
            <img src="/assets/images/logo_github.png" />
        </a>
	
    </p>
</footer>


  </body>

</html>
