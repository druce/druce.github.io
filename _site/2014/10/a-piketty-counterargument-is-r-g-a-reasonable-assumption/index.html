<!DOCTYPE html>
<html lang="en">

  <head>
    
      






    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>A Piketty counterargument: Is r &gt; g a reasonable assumption?</title>

    <meta name="description" content="A thought experiment: If you could buy an asset that returned the GDP growth rate, would you, should you do it?">

    <meta content="StreetEYE Blog" property="og:site_name">
    
        <meta content="A Piketty counterargument: Is r > g a reasonable assumption?" property="og:title">
    
    
        <meta content="article" property="og:type">
    
    
        <meta content="A thought experiment: If you could buy an asset that returned the GDP growth rate, would you, should you do it?" property="og:description">
    
    
        <meta content="http://0.0.0.0:4000/2014/10/a-piketty-counterargument-is-r-g-a-reasonable-assumption/" property="og:url">
    
    
        <meta content="2014-10-21T17:32:58-04:00" property="article:published_time">
        <meta content="http://0.0.0.0:4000/about/" property="article:author">
    
    
    
        
        <meta content="economics" property="article:tag">
        
    

    <link rel="shortcut icon" href="/assets/favicon_peach.ico">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="http://0.0.0.0:4000/2014/10/a-piketty-counterargument-is-r-g-a-reasonable-assumption/">

    <!-- For Latex -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

    <!-- Google Analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-8161570-6', 'auto');
        ga('send', 'pageview');
    </script>

    <!-- For Facebook share button -->
    <div id="fb-root"></div>
    <script>
      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.9";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>

    <!-- Twitter cards -->
    <meta name="twitter:site"    content="@streeteye">
    <meta name="twitter:creator" content="@Druce Vertes">
    <meta name="twitter:title"   content="A Piketty counterargument: Is r > g a reasonable assumption?">

    
        <meta name="twitter:description" content="<blockquote>
  <p>A thought experiment: <em>If you could buy an asset that returned the GDP growth rate, would you, should you do it?</em></p>
</blockquote>

">
    

    
        <meta name="twitter:card"  content="summary">
        <meta name="twitter:image" content="">
    
    <!-- end of Twitter cards -->

</head>


  <body>

    <header class="site-header" role="banner" id='header-bar'>

    <div class="wrapper">
        
        <a class="site-title" href="/">StreetEYE Blog</a>

        <nav class="site-nav">
            <a class="page-link" href="/contact.html">&#x1f984; Contact</a>
        </nav>
        <nav class="site-nav">
            <a class="page-link" href="/FAQ.html">&#x1F64B; FAQ</a>
        </nav>
        <!-- <nav class="site-nav">
            <a class="page-link" href="/log.html">&#x231b; Log</a>
        </nav> -->
        <nav class="site-nav">
            <a class="page-link" href="/archive.html">&#x231b; Archive</a>
        </nav>

    </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">A Piketty counterargument: Is r &gt; g a reasonable assumption?</h1>
    <p class="post-meta">

      <time datetime="2014-10-21T17:32:58-04:00" itemprop="datePublished">
        
        Oct 21, 2014
      </time>

      <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        by <span itemprop="name">Druce Vertes</span>
      </span>

      <span>
        
          
          <a class="post-tag" href="/lil-log/tag/economics"><nobr>economics</nobr>&nbsp;</a>
        
      </span>
      <!--
      <span class="share-buttons">
        <span class="share-button"><a class="twitter-share-button" href="https://twitter.com/share" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></span>

        <span class="share-button"><span class="fb-like" data-href="/2014/10/a-piketty-counterargument-is-r-g-a-reasonable-assumption/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="true"></span></span>
      </span>
      <div style="clear: both;"/>
      -->

    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <blockquote>
  <p>A thought experiment: <em>If you could buy an asset that returned the GDP growth rate, would you, should you do it?</em></p>
</blockquote>

<!--more-->
<p>In other words, if you had a choice of Piketty’s <em>r</em> and <em>g</em>, from his ‘Iron Law’ equation <em>r &gt; g</em>, which would you choose?</p>

<p><a href="http://www.vox.com/2014/6/26/5837638/the-ipo-is-dying-marc-andreessen-explains-why">Marc Andreessen</a> said, <em>“The funny thing about Piketty is that he has a lot more faith in returns on invested capital than any professional investor I’ve ever met.”</em> And I tend to agree with him. If someone offered me a guarantee of <em>g</em>, I would put a good chunk of my retirement portfolio into it.</p>

<p>Why?</p>

<ul>
  <li>US real GDP growth has averaged about 3.5% since 1930.</li>
  <li>Bonds’ long run real returns are less than GDP growth, maybe 2% real (and remarkably less right now).</li>
  <li>Stocks return more historically: on average about 8% real returns since 1930. (and also currently priced to underperform)</li>
  <li>But stock returns are super bumpy. In 2008 they were down 37% on the year (and more at the trough).</li>
  <li>Companies have financial and operating leverage, so in the medium term stocks are like an option on GDP struck at expected GDP. If GDP outperforms the expectations built into prices when you buy stocks, you’ll do really well, if GDP disappoints, you will lose quite a bit of money.</li>
  <li>In the longer run, the outperformance of stocks over GDP seems to stem from 1) more leverage/risk and 2) historically, persistently better than expected outcomes, which is another way of saying a persistently excessive equity risk premium. People have historically feared stock volatility even more than they reasonably should have feared those 37% crashes, or stocks and the economy have historically on average outperformed people’s expectations.</li>
  <li>The <em>r</em> Piketty refers to is the unlevered real return across all deployments of capital in GDP: Residential, non-residential construction, plant and equipment, inventories/working capital. <sup><small>1</small></sup></li>
</ul>

<p>We can compute, historically, if <em>g</em> would have offered a good deal within the major investment classes. So let’s try it! Using historical real returns of US stocks, bonds, bills, gold, and this hypothetical GDP asset, the efficient frontier looks like this:</p>

<p><a href="/assets/wp-content/uploads/2014/10/Rplot01.png"><img class="aligncenter size-full wp-image-2850" alt="Efficient Frontier" src="/assets/wp-content/uploads/2014/10/Rplot01.png" width="640" height="480" srcset="/assets/wp-content/uploads/2014/10/Rplot01.png 640w, /assets/wp-content/uploads/2014/10/Rplot01-300x225.png 300w" sizes="(max-width: 640px) 100vw, 640px" /></a></p>

<p>And the transition map showing the efficient portfolio: As you go from left to right, you increase your risk and return, move out on the efficient frontier, and the composition of your portfolio changes.</p>

<p><a href="/assets/wp-content/uploads/2014/10/Rplot02.png"><img class="aligncenter size-full wp-image-2852" alt="Transition Map" src="/assets/wp-content/uploads/2014/10/Rplot02.png" width="640" height="480" srcset="/assets/wp-content/uploads/2014/10/Rplot02.png 640w, /assets/wp-content/uploads/2014/10/Rplot02-300x225.png 300w" sizes="(max-width: 640px) 100vw, 640px" /></a></p>

<p>The minimum risk portfolio starts with about 40% GDP. As you stretch for higher risk and returns it peaks at about 75%, before giving way to an increasing mix of higher returning stocks.</p>

<p>The bottom line is, if you could buy <em>g</em>, in most cases you would devote quite a big chunk of your portfolio to it. All the portfolios we would consider diversified have more ‘GDP’ than stocks.</p>

<p>Piketty makes the following claims:</p>

<ul>
  <li>When the rate of return on capital <em>r</em> is greater than the rate of GDP growth <em>g</em>, owners of capital get richer faster than wage-earners.</li>
  <li>It is an ‘iron law of capitalism’ that in that situation inequality will increase.</li>
  <li>This is a problem, and to avoid the ills associated with that, a global capital levy is an appropriate solution.</li>
</ul>

<p>I would make the following counterclaims:</p>

<ul>
  <li>If people could buy an asset with <em>r=g</em>, they would.</li>
  <li>If some people could persistently identify assets and strategies that earned <em>r&gt;g</em>, they could make money supplying GDP-linked bonds or swaps which paid <em>g</em>, turn around and invest at <em>r&gt;g</em> and make a profit.</li>
  <li>We don’t see this sort of profitable banking or arbitrage in the marketplace. Even Warren Buffett wouldn’t offer <em>g</em>-linked bonds in size. Why not? Because he can put his hands on cash at better terms. And because if someone had offered such a deal at the beginning of 1930 (never mind the stock market peak) and invested in stocks, they wouldn’t have broken even until the 50s. And bonds don’t save you due to their low returns.</li>
</ul>

<p>It seems to me the market is telling us it does not believe <em>r &gt; g</em>.</p>

<p><em>r</em> seems partly endogenous and partly exogenous: it depends on availability of capital and the return on the available investment opportunities, which can also be highly uncertain and idiosyncratic.</p>

<p>As a thought experiment, suppose cheap fusion was invented tomorrow. That would result in an investment boom. Enterprises making fusion reactors, fusion vehicles, all manner of cheap fusion energy-powered factories would suck in capital, crowd out other investments, <em>r</em> would go up, and an era of plenty for mankind would hopefully ensue as all those investments threw off great <em>r</em> initially, and eventually <em>g</em>. <em>r</em> would presumably rise above <em>g</em> initially, and then fall below it as the big rise in <em>g</em> threw off more surplus investment capital than people knew what to do with. That’s what boom/busts generally look like.</p>

<p>On the other hand, if oil suddenly runs out, or California tumbles into the Pacific, <em>r</em> will be negative, a lot of people with large capital investments will find them uneconomic, or lose them entirely to the whims of fate.</p>

<p>If you combine all the layers of the economy’s capital structure, including residential, non-residential structures and plant and equipment, working capital/inventories, I think the safer bet in the very long run is <em>r ~= g</em>. Piketty shows anything else is unsustainable. If <em>r &lt; g</em>, there is too much capital and investors are foolishly investing in poor projects that lose money and the economy is getting less and less capital intensive over time. If there were no countervailing forces, this would presumably continue, until we’re back to performing surgery with stone knives and bear skins. If <em>r &gt; g</em>, the economy is getting more capital-intensive over time, investors are under-investing in given growth opportunities due to scarcity of capital. If you believe Piketty, this continues until you somehow end up with a few capitalist lords supervising armies of robots and starving serfs.</p>

<p>Over the very long run, I don’t see any reason to think either situation qualifies as ‘iron law’. If anything the capitalist era has seen wealth distributed more widely than in the feudal era, and after a few hundred years we’re not once again ruled by a few kings and armies of serfs and robots (although recent tendencies in that direction are a bit concerning).</p>

<p>As an accounting identity you can say, when <em>r&gt;g</em>, capital owners are doing better than everyone else.</p>

<p>You just can’t turn that into a statement about perpetually increasing inequality without heroic assumptions about how capital is distributed, and how the distribution of capital income, and wage income is changing. (Including how new wealth destroys old wealth, e.g. Apple destroys RIM and Nokia, how wealth gets dispersed over generations, how it eventually falls into the hands of fools and gets <a href="http://www.businessweek.com/videos/2014-10-07/gone-in-an-instant-how-one-nba-player-lost-110m">destroyed and dissipated</a>.)</p>

<p>If that isn’t enough, let me throw out one more, entirely unrelated point. The distinction between return on capital and return on labor is ultimately more fuzzy and arbitrary than one might think.</p>

<p>Mitt Romney made a modest fortune from Bain Capital. Not only did he benefit from getting paid in ‘carried interest’ which was taxed as a capital gain at 15%, but he also put the most levered bets into his IRA, where they appreciated with <a href="http://www.theatlantic.com/politics/archive/2012/09/whats-really-going-on-with-mitt-romneys-102-million-ira/261500/">no tax hit at all</a>, until he decides to withdraw them.</p>

<p>Of course, if IRAs don’t get taxed, and capital gains are taxed at 15% instead of 39.6% on income, no one can blame him for structuring his compensation as capital gains.</p>

<p>And can anyone argue that if the tax rates were reversed, the payout would have come as bonuses and labor income for his talents and hard work, not as capital gains?</p>

<p>The distinction between return on capital and labor is in large part arbitrary when it comes to the top 1%. Whether you own a hot dog stand, a medical practice, or are a founder of Microsoft, it’s pretty much impossible to tell which part of the income is from your hard work and which is a return on investment from…your hard work in earlier years. And it’s a little pointless to try.</p>

<p><a href="http://en.wikipedia.org/wiki/Goodhart%27s_law">Goodhart’s Law:</a> ‘Iron laws’ turn out to be made of straw once you depend on them for policy outcomes.</p>

<p>Democratic societies are founded on equality of opportunity, equality before the law, equality in the voting booth. When so much of our life takes place in the economic sphere, excessive inequality of wealth and income inevitably leads to inequality of opportunity and inequality before the law. <em>r &gt; g</em>, the “iron law” and the global wealth tax, are an academic sideshow, and taken to an extreme, divorced from reality and common sense. We should strive for better education and opportunity for everyone, and a fairer tax system than the current abomination. <a href="http://www.gatesnotes.com/Books/Why-Inequality-Matters-Capital-in-21st-Century-Review" title="Gates Notes">Bill Gates</a> has a thoughtful perspective on the subject, noteworthy because of where his own personal interests lie.</p>

<p><small><sup>1</sup></small> <small>It’s a bit challenging to calculate the unlevered returns to all the capital deployed in GDP, but that hasn’t stopped <a href="http://www.nber.org/papers/w6263.pdf">some from trying</a>. Logically, that rate of return should be in the realm of returns available from the universe of investable securities, after expenses, if for no other reason than that companies can issue stocks and bonds to fund capital projects, and when market rates are low and project returns are high, they will issue securities and fund projects until the gap no longer provides that incentive. In any event, that universe of securities represents the investments generally available to all those capital owners Piketty thinks have the tendency to get richer and richer.</small></p>

<p><small><sup>2</sup>Let’s try anyway. In the case of the hot-dog vendor, you can ask what the cart-owner would have to pay to hire someone at salary to sell the dogs and say the balance is return on capital. But the wage-earner won’t work as hard and sell as many. Some of the difference is because the owner is in fact working harder. Same applies to the CEO. Bill Gates could have paid someone else to be CEO. But Microsoft wouldn’t have done as well. It’s quite hard to say how much of the money he made, or any of the Microsoft millionaires for that matter, was labor income, and how much was return on income foregone and re-invested in the company.</small></p>

<div class="wp_codebox_msgheader wp_codebox_hide">
  <span class="right"><sup><a href="http://www.ericbess.com/ericblog/2008/03/03/wp-codebox/#examples" target="_blank" title="WP-CodeBox HowTo?"><span style="color: #99cc00">?</span></a></sup></span><span class="left"><a href="javascript:;" onclick="javascript:showCodeTxt('p2841code15'); return false;">View Code</a> RSPLUS</span>
  
  <div class="codebox_clear">
  </div>
</div>

<div class="wp_codebox">
  <table>
    <tr id="p284115">
      <td class="code" id="p2841code15">
        <pre class="rsplus" style="font-family:monospace;">&nbsp;
<span style="color: #0000FF; font-weight: bold;">install.<span style="">packages</span></span><span style="color: #080;">&#40;</span><span style="color: #ff0000;">'lpSolve'</span><span style="color: #080;">&#41;</span> 
<a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/require.html"><span style="color: #0000FF; font-weight: bold;">require</span></a><span style="color: #080;">&#40;</span>lpSolve<span style="color: #080;">&#41;</span>
&nbsp;
<span style="color: #0000FF; font-weight: bold;">install.<span style="">packages</span></span><span style="color: #080;">&#40;</span><span style="color: #ff0000;">'quadprog'</span><span style="color: #080;">&#41;</span>
<a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/require.html"><span style="color: #0000FF; font-weight: bold;">require</span></a><span style="color: #080;">&#40;</span>quadprog<span style="color: #080;">&#41;</span>
&nbsp;
<a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/require.html"><span style="color: #0000FF; font-weight: bold;">require</span></a><span style="color: #080;">&#40;</span>ggplot2<span style="color: #080;">&#41;</span>   
<a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/require.html"><span style="color: #0000FF; font-weight: bold;">require</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">"reshape"</span><span style="color: #080;">&#41;</span>
&nbsp;
SP500 <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #080;">-</span><span style="color: #ff0000;">0.2512</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.4384</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0864</span>,<span style="color: #ff0000;">0.4998</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0119</span>,<span style="color: #ff0000;">0.4674</span>,<span style="color: #ff0000;">0.3194</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.3534</span>,<span style="color: #ff0000;">0.2928</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.011</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.1067</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.1277</span>,<span style="color: #ff0000;">0.1917</span>,<span style="color: #ff0000;">0.2506</span>,<span style="color: #ff0000;">0.1903</span>,<span style="color: #ff0000;">0.3582</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0843</span>,<span style="color: #ff0000;">0.052</span>,<span style="color: #ff0000;">0.057</span>,<span style="color: #ff0000;">0.183</span>,<span style="color: #ff0000;">0.3081</span>,<span style="color: #ff0000;">0.2368</span>,<span style="color: #ff0000;">0.1815</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0121</span>,<span style="color: #ff0000;">0.5256</span>,<span style="color: #ff0000;">0.326</span>,<span style="color: #ff0000;">0.0744</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.1046</span>,<span style="color: #ff0000;">0.4372</span>,<span style="color: #ff0000;">0.1206</span>,<span style="color: #ff0000;">0.0034</span>,<span style="color: #ff0000;">0.2664</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0881</span>,<span style="color: #ff0000;">0.2261</span>,<span style="color: #ff0000;">0.1642</span>,<span style="color: #ff0000;">0.124</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0997</span>,<span style="color: #ff0000;">0.238</span>,<span style="color: #ff0000;">0.1081</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0824</span>,<span style="color: #ff0000;">0.0356</span>,<span style="color: #ff0000;">0.1422</span>,<span style="color: #ff0000;">0.1876</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.1431</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.259</span>,<span style="color: #ff0000;">0.37</span>,<span style="color: #ff0000;">0.2383</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0698</span>,<span style="color: #ff0000;">0.0651</span>,<span style="color: #ff0000;">0.1852</span>,<span style="color: #ff0000;">0.3174</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.047</span>,<span style="color: #ff0000;">0.2042</span>,<span style="color: #ff0000;">0.2234</span>,<span style="color: #ff0000;">0.0615</span>,<span style="color: #ff0000;">0.3124</span>,<span style="color: #ff0000;">0.1849</span>,<span style="color: #ff0000;">0.0581</span>,<span style="color: #ff0000;">0.1654</span>,<span style="color: #ff0000;">0.3148</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0306</span>,<span style="color: #ff0000;">0.3023</span>,<span style="color: #ff0000;">0.0749</span>,<span style="color: #ff0000;">0.0997</span>,<span style="color: #ff0000;">0.0133</span>,<span style="color: #ff0000;">0.372</span>,<span style="color: #ff0000;">0.2382</span>,<span style="color: #ff0000;">0.3186</span>,<span style="color: #ff0000;">0.2834</span>,<span style="color: #ff0000;">0.2089</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0903</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.1185</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.2197</span>,<span style="color: #ff0000;">0.2836</span>,<span style="color: #ff0000;">0.1074</span>,<span style="color: #ff0000;">0.0483</span>,<span style="color: #ff0000;">0.1561</span>,<span style="color: #ff0000;">0.0548</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.3658</span>,<span style="color: #ff0000;">0.2592</span>,<span style="color: #ff0000;">0.1486</span><span style="color: #080;">&#41;</span>
&nbsp;
BONDS <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">0.0454</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0256</span>,<span style="color: #ff0000;">0.0879</span>,<span style="color: #ff0000;">0.0186</span>,<span style="color: #ff0000;">0.0796</span>,<span style="color: #ff0000;">0.0447</span>,<span style="color: #ff0000;">0.0502</span>,<span style="color: #ff0000;">0.0138</span>,<span style="color: #ff0000;">0.0421</span>,<span style="color: #ff0000;">0.0441</span>,<span style="color: #ff0000;">0.054</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0202</span>,<span style="color: #ff0000;">0.0229</span>,<span style="color: #ff0000;">0.0249</span>,<span style="color: #ff0000;">0.0258</span>,<span style="color: #ff0000;">0.038</span>,<span style="color: #ff0000;">0.0313</span>,<span style="color: #ff0000;">0.0092</span>,<span style="color: #ff0000;">0.0195</span>,<span style="color: #ff0000;">0.0466</span>,<span style="color: #ff0000;">0.0043</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.003</span>,<span style="color: #ff0000;">0.0227</span>,<span style="color: #ff0000;">0.0414</span>,<span style="color: #ff0000;">0.0329</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0134</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0226</span>,<span style="color: #ff0000;">0.068</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.021</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0265</span>,<span style="color: #ff0000;">0.1164</span>,<span style="color: #ff0000;">0.0206</span>,<span style="color: #ff0000;">0.0569</span>,<span style="color: #ff0000;">0.0168</span>,<span style="color: #ff0000;">0.0373</span>,<span style="color: #ff0000;">0.0072</span>,<span style="color: #ff0000;">0.0291</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0158</span>,<span style="color: #ff0000;">0.0327</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0501</span>,<span style="color: #ff0000;">0.1675</span>,<span style="color: #ff0000;">0.0979</span>,<span style="color: #ff0000;">0.0282</span>,<span style="color: #ff0000;">0.0366</span>,<span style="color: #ff0000;">0.0199</span>,<span style="color: #ff0000;">0.0361</span>,<span style="color: #ff0000;">0.1598</span>,<span style="color: #ff0000;">0.0129</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0078</span>,<span style="color: #ff0000;">0.0067</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0299</span>,<span style="color: #ff0000;">0.082</span>,<span style="color: #ff0000;">0.3281</span>,<span style="color: #ff0000;">0.032</span>,<span style="color: #ff0000;">0.1373</span>,<span style="color: #ff0000;">0.2571</span>,<span style="color: #ff0000;">0.2428</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0496</span>,<span style="color: #ff0000;">0.0822</span>,<span style="color: #ff0000;">0.1769</span>,<span style="color: #ff0000;">0.0624</span>,<span style="color: #ff0000;">0.15</span>,<span style="color: #ff0000;">0.0936</span>,<span style="color: #ff0000;">0.1421</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0804</span>,<span style="color: #ff0000;">0.2348</span>,<span style="color: #ff0000;">0.0143</span>,<span style="color: #ff0000;">0.0994</span>,<span style="color: #ff0000;">0.1492</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0825</span>,<span style="color: #ff0000;">0.1666</span>,<span style="color: #ff0000;">0.0557</span>,<span style="color: #ff0000;">0.1512</span>,<span style="color: #ff0000;">0.0038</span>,<span style="color: #ff0000;">0.0449</span>,<span style="color: #ff0000;">0.0287</span>,<span style="color: #ff0000;">0.0196</span>,<span style="color: #ff0000;">0.1021</span>,<span style="color: #ff0000;">0.201</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.1112</span>,<span style="color: #ff0000;">0.0846</span><span style="color: #080;">&#41;</span>
&nbsp;
BILLS <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">0.0455</span>,<span style="color: #ff0000;">0.0231</span>,<span style="color: #ff0000;">0.0107</span>,<span style="color: #ff0000;">0.0096</span>,<span style="color: #ff0000;">0.0032</span>,<span style="color: #ff0000;">0.0018</span>,<span style="color: #ff0000;">0.0017</span>,<span style="color: #ff0000;">0.003</span>,<span style="color: #ff0000;">0.0008</span>,<span style="color: #ff0000;">0.0004</span>,<span style="color: #ff0000;">0.0003</span>,<span style="color: #ff0000;">0.0008</span>,<span style="color: #ff0000;">0.0034</span>,<span style="color: #ff0000;">0.0038</span>,<span style="color: #ff0000;">0.0038</span>,<span style="color: #ff0000;">0.0038</span>,<span style="color: #ff0000;">0.0038</span>,<span style="color: #ff0000;">0.0057</span>,<span style="color: #ff0000;">0.0102</span>,<span style="color: #ff0000;">0.011</span>,<span style="color: #ff0000;">0.0117</span>,<span style="color: #ff0000;">0.0148</span>,<span style="color: #ff0000;">0.0167</span>,<span style="color: #ff0000;">0.0189</span>,<span style="color: #ff0000;">0.0096</span>,<span style="color: #ff0000;">0.0166</span>,<span style="color: #ff0000;">0.0256</span>,<span style="color: #ff0000;">0.0323</span>,<span style="color: #ff0000;">0.0178</span>,<span style="color: #ff0000;">0.0326</span>,<span style="color: #ff0000;">0.0305</span>,<span style="color: #ff0000;">0.0227</span>,<span style="color: #ff0000;">0.0278</span>,<span style="color: #ff0000;">0.0311</span>,<span style="color: #ff0000;">0.0351</span>,<span style="color: #ff0000;">0.039</span>,<span style="color: #ff0000;">0.0484</span>,<span style="color: #ff0000;">0.0433</span>,<span style="color: #ff0000;">0.0526</span>,<span style="color: #ff0000;">0.0656</span>,<span style="color: #ff0000;">0.0669</span>,<span style="color: #ff0000;">0.0454</span>,<span style="color: #ff0000;">0.0395</span>,<span style="color: #ff0000;">0.0673</span>,<span style="color: #ff0000;">0.0778</span>,<span style="color: #ff0000;">0.0599</span>,<span style="color: #ff0000;">0.0497</span>,<span style="color: #ff0000;">0.0513</span>,<span style="color: #ff0000;">0.0693</span>,<span style="color: #ff0000;">0.0994</span>,<span style="color: #ff0000;">0.1122</span>,<span style="color: #ff0000;">0.143</span>,<span style="color: #ff0000;">0.1101</span>,<span style="color: #ff0000;">0.0845</span>,<span style="color: #ff0000;">0.0961</span>,<span style="color: #ff0000;">0.0749</span>,<span style="color: #ff0000;">0.0604</span>,<span style="color: #ff0000;">0.0572</span>,<span style="color: #ff0000;">0.0645</span>,<span style="color: #ff0000;">0.0811</span>,<span style="color: #ff0000;">0.0755</span>,<span style="color: #ff0000;">0.0561</span>,<span style="color: #ff0000;">0.0341</span>,<span style="color: #ff0000;">0.0298</span>,<span style="color: #ff0000;">0.0399</span>,<span style="color: #ff0000;">0.0552</span>,<span style="color: #ff0000;">0.0502</span>,<span style="color: #ff0000;">0.0505</span>,<span style="color: #ff0000;">0.0473</span>,<span style="color: #ff0000;">0.0451</span>,<span style="color: #ff0000;">0.0576</span>,<span style="color: #ff0000;">0.0367</span>,<span style="color: #ff0000;">0.0166</span>,<span style="color: #ff0000;">0.0103</span>,<span style="color: #ff0000;">0.0123</span>,<span style="color: #ff0000;">0.0301</span>,<span style="color: #ff0000;">0.0468</span>,<span style="color: #ff0000;">0.0464</span>,<span style="color: #ff0000;">0.0159</span>,<span style="color: #ff0000;">0.0014</span>,<span style="color: #ff0000;">0.0013</span><span style="color: #080;">&#41;</span>
&nbsp;
CPI <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #080;">-</span><span style="color: #ff0000;">0.0639535</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0931677</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.1027397</span>,<span style="color: #ff0000;">0.0076336</span>,<span style="color: #ff0000;">0.0151515</span>,<span style="color: #ff0000;">0.0298507</span>,<span style="color: #ff0000;">0.0144928</span>,<span style="color: #ff0000;">0.0285714</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0277778</span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;">0.0071429</span>,<span style="color: #ff0000;">0.0992908</span>,<span style="color: #ff0000;">0.0903226</span>,<span style="color: #ff0000;">0.0295858</span>,<span style="color: #ff0000;">0.0229885</span>,<span style="color: #ff0000;">0.0224719</span>,<span style="color: #ff0000;">0.1813187</span>,<span style="color: #ff0000;">0.0883721</span>,<span style="color: #ff0000;">0.0299145</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0207469</span>,<span style="color: #ff0000;">0.059322</span>,<span style="color: #ff0000;">0.06</span>,<span style="color: #ff0000;">0.0075472</span>,<span style="color: #ff0000;">0.0074906</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.0074349</span>,<span style="color: #ff0000;">0.0037453</span>,<span style="color: #ff0000;">0.0298507</span>,<span style="color: #ff0000;">0.0289855</span>,<span style="color: #ff0000;">0.0176056</span>,<span style="color: #ff0000;">0.017301</span>,<span style="color: #ff0000;">0.0136054</span>,<span style="color: #ff0000;">0.0067114</span>,<span style="color: #ff0000;">0.0133333</span>,<span style="color: #ff0000;">0.0164474</span>,<span style="color: #ff0000;">0.0097087</span>,<span style="color: #ff0000;">0.0192308</span>,<span style="color: #ff0000;">0.0345912</span>,<span style="color: #ff0000;">0.0303951</span>,<span style="color: #ff0000;">0.0471976</span>,<span style="color: #ff0000;">0.0619718</span>,<span style="color: #ff0000;">0.0557029</span>,<span style="color: #ff0000;">0.0326633</span>,<span style="color: #ff0000;">0.0340633</span>,<span style="color: #ff0000;">0.0870588</span>,<span style="color: #ff0000;">0.1233766</span>,<span style="color: #ff0000;">0.0693642</span>,<span style="color: #ff0000;">0.0486486</span>,<span style="color: #ff0000;">0.0670103</span>,<span style="color: #ff0000;">0.0901771</span>,<span style="color: #ff0000;">0.1329394</span>,<span style="color: #ff0000;">0.125163</span>,<span style="color: #ff0000;">0.0892236</span>,<span style="color: #ff0000;">0.0382979</span>,<span style="color: #ff0000;">0.0379098</span>,<span style="color: #ff0000;">0.0394867</span>,<span style="color: #ff0000;">0.0379867</span>,<span style="color: #ff0000;">0.010979</span>,<span style="color: #ff0000;">0.0443439</span>,<span style="color: #ff0000;">0.0441941</span>,<span style="color: #ff0000;">0.046473</span>,<span style="color: #ff0000;">0.0610626</span>,<span style="color: #ff0000;">0.0306428</span>,<span style="color: #ff0000;">0.0290065</span>,<span style="color: #ff0000;">0.0274841</span>,<span style="color: #ff0000;">0.026749</span>,<span style="color: #ff0000;">0.0253841</span>,<span style="color: #ff0000;">0.0332248</span>,<span style="color: #ff0000;">0.017024</span>,<span style="color: #ff0000;">0.016119</span>,<span style="color: #ff0000;">0.0268456</span>,<span style="color: #ff0000;">0.0338681</span>,<span style="color: #ff0000;">0.0155172</span>,<span style="color: #ff0000;">0.0237691</span>,<span style="color: #ff0000;">0.0187949</span>,<span style="color: #ff0000;">0.0325556</span>,<span style="color: #ff0000;">0.0341566</span>,<span style="color: #ff0000;">0.0254065</span>,<span style="color: #ff0000;">0.0408127</span>,<span style="color: #ff0000;">0.0009141</span>,<span style="color: #ff0000;">0.0272133</span>,<span style="color: #ff0000;">0.0149572</span><span style="color: #080;">&#41;</span>
&nbsp;
GOLD <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;"></span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;">0.44700286</span>,<span style="color: #ff0000;">0.079661828</span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;"></span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.014388737</span>,<span style="color: #ff0000;">0.028573372</span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;">0.027779564</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.006872879</span>,<span style="color: #ff0000;">0.027212564</span>,<span style="color: #ff0000;">0.026491615</span>,<span style="color: #ff0000;">0.117056555</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.023530497</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.036367644</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.00619197</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.00623055</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.033039854</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.086306904</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.007067167</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.002840911</span>,<span style="color: #ff0000;">0.001421464</span>,<span style="color: #ff0000;">0.001419447</span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;">0.034846731</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.027779564</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.004234304</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.002832863</span>,<span style="color: #ff0000;">0.002832863</span>,<span style="color: #ff0000;">0.004234304</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.002820876</span>,<span style="color: #ff0000;">0.002820876</span>,<span style="color: #ff0000;">0.203228242</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.059188871</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.052577816</span>,<span style="color: #ff0000;">0.136739608</span>,<span style="color: #ff0000;">0.358646094</span>,<span style="color: #ff0000;">0.511577221</span>,<span style="color: #ff0000;">0.545727802</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.132280611</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.253090628</span>,<span style="color: #ff0000;">0.168898536</span>,<span style="color: #ff0000;">0.265477915</span>,<span style="color: #ff0000;">0.464157559</span>,<span style="color: #ff0000;">0.689884535</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.285505793</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.201637346</span>,<span style="color: #ff0000;">0.120144312</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.163629424</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.127202258</span>,<span style="color: #ff0000;">0.149181164</span>,<span style="color: #ff0000;">0.192236014</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.020385757</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.134512586</span>,<span style="color: #ff0000;">0.005221944</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.058998341</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.051002554</span>,<span style="color: #ff0000;">0.045462374</span>,<span style="color: #ff0000;">0.064538521</span>,<span style="color: #ff0000;">0.002600782</span>,<span style="color: #ff0000;">0.010336009</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.155436854</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.121167134</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.052185753</span>,<span style="color: #ff0000;"></span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.028987537</span>,<span style="color: #ff0000;">0.133990846</span>,<span style="color: #ff0000;">0.157360955</span>,<span style="color: #ff0000;">0.119003292</span>,<span style="color: #ff0000;">0.084161792</span>,<span style="color: #ff0000;">0.308209839</span>,<span style="color: #ff0000;">0.142551544</span>,<span style="color: #ff0000;">0.220855221</span>,<span style="color: #ff0000;">0.110501915</span>,<span style="color: #ff0000;">0.228258652</span><span style="color: #080;">&#41;</span>
&nbsp;
GDP <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #080;">-</span><span style="color: #ff0000;">0.085084232</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.064032275</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.128868258</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.012560264</span>,<span style="color: #ff0000;">0.107799049</span>,<span style="color: #ff0000;">0.089074461</span>,<span style="color: #ff0000;">0.129392971</span>,<span style="color: #ff0000;">0.051013673</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.033106047</span>,<span style="color: #ff0000;">0.079706783</span>,<span style="color: #ff0000;">0.08808869</span>,<span style="color: #ff0000;">0.17707922</span>,<span style="color: #ff0000;">0.188888143</span>,<span style="color: #ff0000;">0.170391692</span>,<span style="color: #ff0000;">0.079905483</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.009645441</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.115835513</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.010964353</span>,<span style="color: #ff0000;">0.041559245</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.00549505</span>,<span style="color: #ff0000;">0.087162129</span>,<span style="color: #ff0000;">0.080586081</span>,<span style="color: #ff0000;">0.040720339</span>,<span style="color: #ff0000;">0.046944343</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.005638952</span>,<span style="color: #ff0000;">0.071219054</span>,<span style="color: #ff0000;">0.02132165</span>,<span style="color: #ff0000;">0.021055266</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.007352169</span>,<span style="color: #ff0000;">0.069022678</span>,<span style="color: #ff0000;">0.025635104</span>,<span style="color: #ff0000;">0.025541223</span>,<span style="color: #ff0000;">0.061164957</span>,<span style="color: #ff0000;">0.043539949</span>,<span style="color: #ff0000;">0.057670519</span>,<span style="color: #ff0000;">0.064997322</span>,<span style="color: #ff0000;">0.065934066</span>,<span style="color: #ff0000;">0.027436363</span>,<span style="color: #ff0000;">0.049090742</span>,<span style="color: #ff0000;">0.03140731</span>,<span style="color: #ff0000;">0.002015915</span>,<span style="color: #ff0000;">0.032952139</span>,<span style="color: #ff0000;">0.052628342</span>,<span style="color: #ff0000;">0.056443916</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.005180583</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.001964418</span>,<span style="color: #ff0000;">0.053849296</span>,<span style="color: #ff0000;">0.046093667</span>,<span style="color: #ff0000;">0.055617315</span>,<span style="color: #ff0000;">0.031752617</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.002443475</span>,<span style="color: #ff0000;">0.025936376</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.019100292</span>,<span style="color: #ff0000;">0.046323541</span>,<span style="color: #ff0000;">0.072585395</span>,<span style="color: #ff0000;">0.042388469</span>,<span style="color: #ff0000;">0.035120756</span>,<span style="color: #ff0000;">0.034616119</span>,<span style="color: #ff0000;">0.042040676</span>,<span style="color: #ff0000;">0.036804531</span>,<span style="color: #ff0000;">0.019188746</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.000737018</span>,<span style="color: #ff0000;">0.03555943</span>,<span style="color: #ff0000;">0.027453435</span>,<span style="color: #ff0000;">0.04037391</span>,<span style="color: #ff0000;">0.027197286</span>,<span style="color: #ff0000;">0.03795652</span>,<span style="color: #ff0000;">0.044872645</span>,<span style="color: #ff0000;">0.044495193</span>,<span style="color: #ff0000;">0.046851005</span>,<span style="color: #ff0000;">0.040925252</span>,<span style="color: #ff0000;">0.009753418</span>,<span style="color: #ff0000;">0.017867562</span>,<span style="color: #ff0000;">0.028066125</span>,<span style="color: #ff0000;">0.037856696</span>,<span style="color: #ff0000;">0.033448288</span>,<span style="color: #ff0000;">0.026668165</span>,<span style="color: #ff0000;">0.01778456</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.002911179</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">0.027760546</span>,<span style="color: #ff0000;">0.025321284</span><span style="color: #080;">&#41;</span>
&nbsp;
<span style="color: #228B22;"># put into a data frame (matrix)</span>
&nbsp;
fnominal<span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/data.frame.html"><span style="color: #0000FF; font-weight: bold;">data.<span style="">frame</span></span></a><span style="color: #080;">&#40;</span>stocks<span style="color: #080;">=</span>SP500, bills<span style="color: #080;">=</span>BILLS, bonds<span style="color: #080;">=</span>BONDS, gold<span style="color: #080;">=</span>GOLD, CPI<span style="color: #080;">=</span>CPI, GDP<span style="color: #080;">=</span>GDP<span style="color: #080;">&#41;</span>
freal<span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/data.frame.html"><span style="color: #0000FF; font-weight: bold;">data.<span style="">frame</span></span></a><span style="color: #080;">&#40;</span>stocks<span style="color: #080;">=</span>SP500<span style="color: #080;">-</span>CPI, bills<span style="color: #080;">=</span>BILLS<span style="color: #080;">-</span>CPI, bonds<span style="color: #080;">=</span>BONDS<span style="color: #080;">-</span>CPI, gold<span style="color: #080;">=</span>GOLD<span style="color: #080;">-</span>CPI, gdp<span style="color: #080;">=</span>GDP<span style="color: #080;">&#41;</span>
&nbsp;
<span style="color: #228B22;"># compute means</span>
realreturns <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/apply.html"><span style="color: #0000FF; font-weight: bold;">apply</span></a><span style="color: #080;">&#40;</span>freal, <span style="color: #ff0000;">2</span>, <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/mean.html"><span style="color: #0000FF; font-weight: bold;">mean</span></a><span style="color: #080;">&#41;</span> 
realreturnspct <span style="color: #080;">=</span> realreturns<span style="color: #080;">*</span><span style="color: #ff0000;">100</span> 
<span style="color: #228B22;"># print them </span>
realreturnspct 
&nbsp;
<span style="color: #228B22;"># compute sds</span>
realsds <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/apply.html"><span style="color: #0000FF; font-weight: bold;">apply</span></a><span style="color: #080;">&#40;</span>freal, <span style="color: #ff0000;">2</span>, <span style="color: #0000FF; font-weight: bold;">sd</span><span style="color: #080;">&#41;</span> 
realsdspct <span style="color: #080;">=</span> realsds<span style="color: #080;">*</span><span style="color: #ff0000;">100</span> 
<span style="color: #228B22;"># print them </span>
&nbsp;
realsdspct 
&nbsp;
<span style="color: #228B22;"># find maximum return portfolio (rightmost point of efficient frontier) </span>
<span style="color: #228B22;"># will be 100% of highest return asset </span>
<span style="color: #228B22;"># maximize </span>
<span style="color: #228B22;"># w1 * stocks +w2 *bills +w3*bonds + w4 * gold </span>
<span style="color: #228B22;"># subject to 0 &lt;= w &lt;= 1 for each w </span>
<span style="color: #228B22;"># will pick highest return asset with w=1 </span>
<span style="color: #228B22;"># skipping &gt;0 constraint, no negative return assets, so not binding </span>
&nbsp;
opt.<span style="">objective</span> <span style="color: #080;">&lt;-</span> realreturns 
opt.<span style="">constraints</span> <span style="color: #080;">&lt;-</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/matrix.html"><span style="color: #0000FF; font-weight: bold;">matrix</span></a> <span style="color: #080;">&#40;</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #228B22;"># constrain sum of weights to 1 </span>
<span style="color: #ff0000;">1</span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #228B22;"># constrain w1 &lt;= 1 </span>
<span style="color: #ff0000;"></span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #228B22;"># constrain w2 &lt;= 1 </span>
<span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #228B22;"># constrain w3 &lt;= 1 </span>
<span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;"></span>, <span style="color: #228B22;"># constrain w4 &lt;= 1 </span>
<span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;">1</span><span style="color: #080;">&#41;</span>, <span style="color: #228B22;"># constrain w5 &lt;= 1 </span>
<a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/nrow.html"><span style="color: #0000FF; font-weight: bold;">nrow</span></a><span style="color: #080;">=</span><span style="color: #ff0000;">6</span>, 
byrow<span style="color: #080;">=</span>TRUE<span style="color: #080;">&#41;</span> 
&nbsp;
opt.<span style="">operator</span> <span style="color: #080;">&lt;-</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">"="</span>, <span style="color: #ff0000;">"&lt;="</span>, <span style="color: #ff0000;">"&lt;="</span>, <span style="color: #ff0000;">"&lt;="</span>, <span style="color: #ff0000;">"&lt;="</span>, <span style="color: #ff0000;">"&lt;="</span><span style="color: #080;">&#41;</span> 
opt.<span style="">rhs</span> <span style="color: #080;">&lt;-</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span><span style="color: #080;">&#41;</span> 
opt.<span style="">dir</span><span style="color: #080;">=</span><span style="color: #ff0000;">"max"</span> 
&nbsp;
solution.<span style="">maxret</span> <span style="color: #080;">=</span> lp <span style="color: #080;">&#40;</span>direction <span style="color: #080;">=</span> opt.<span style="">dir</span>, opt.<span style="">objective</span>, opt.<span style="">constraints</span>, opt.<span style="">operator</span>, opt.<span style="">rhs</span><span style="color: #080;">&#41;</span> 
&nbsp;
<span style="color: #228B22;"># portfolio weights for max return portfolio </span>
wts.<span style="">maxret</span><span style="color: #080;">=</span>solution.<span style="">maxret</span>$solution 
<span style="color: #228B22;"># return for max return portfolio </span>
ret.<span style="">maxret</span><span style="color: #080;">=</span>solution.<span style="">maxret</span>$objval 
<span style="color: #228B22;"># compute return covariance matrix to determine volatility of this portfolio </span>
covmatrix <span style="color: #080;">=</span> <span style="color: #0000FF; font-weight: bold;">cov</span><span style="color: #080;">&#40;</span>freal, use <span style="color: #080;">=</span> <span style="color: #ff0000;">'complete.obs'</span>, method <span style="color: #080;">=</span> <span style="color: #ff0000;">'pearson'</span><span style="color: #080;">&#41;</span> 
<span style="color: #228B22;"># multiply weights x covariances x weights, gives variance </span>
var.<span style="">maxret</span> <span style="color: #080;">=</span> wts.<span style="">maxret</span> <span style="color: #080;">%*%</span> covmatrix <span style="color: #080;">%*%</span> wts.<span style="">maxret</span> 
<span style="color: #228B22;"># square root gives standard deviation (volatility) </span>
vol.<span style="">maxret</span> <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/sqrt.html"><span style="color: #0000FF; font-weight: bold;">sqrt</span></a><span style="color: #080;">&#40;</span>var.<span style="">maxret</span><span style="color: #080;">&#41;</span> 
&nbsp;
wts.<span style="">maxret</span>
ret.<span style="">maxret</span>
vol.<span style="">maxret</span>
&nbsp;
<span style="color: #228B22;">################################################################################</span>
&nbsp;
<span style="color: #228B22;"># find minimum volatility portfolio (leftmost point of efficient frontier) </span>
&nbsp;
&nbsp;
covmatrix <span style="color: #080;">=</span> <span style="color: #0000FF; font-weight: bold;">cov</span><span style="color: #080;">&#40;</span>freal, use <span style="color: #080;">=</span> <span style="color: #ff0000;">'complete.obs'</span>, method <span style="color: #080;">=</span> <span style="color: #ff0000;">'pearson'</span><span style="color: #080;">&#41;</span> 
&nbsp;
nObs <span style="color: #080;">&lt;-</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/length.html"><span style="color: #0000FF; font-weight: bold;">length</span></a><span style="color: #080;">&#40;</span>freal$stocks<span style="color: #080;">&#41;</span> 
nAssets <span style="color: #080;">&lt;-</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/length.html"><span style="color: #0000FF; font-weight: bold;">length</span></a><span style="color: #080;">&#40;</span>freal<span style="color: #080;">&#41;</span> 
&nbsp;
<span style="color: #228B22;"># 1 x numassets array of 1s </span>
opt.<span style="">constraints</span> <span style="color: #080;">&lt;-</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/matrix.html"><span style="color: #0000FF; font-weight: bold;">matrix</span></a> <span style="color: #080;">&#40;</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>
<span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">1</span>, <span style="color: #228B22;"># sum of weights =1 </span>
<span style="color: #ff0000;">1</span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #228B22;"># w1 &gt;= 0 </span>
<span style="color: #ff0000;"></span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #228B22;"># w2 &gt;= 0 </span>
<span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #228B22;"># w3 &gt;= 0 </span>
<span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;">1</span>, <span style="color: #ff0000;"></span>, <span style="color: #228B22;"># w4 &gt;= 0 </span>
<span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;"></span>, <span style="color: #ff0000;">1</span> <span style="color: #228B22;"># w5 &gt;= 0 </span>
<span style="color: #080;">&#41;</span>  
, <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/nrow.html"><span style="color: #0000FF; font-weight: bold;">nrow</span></a><span style="color: #080;">=</span><span style="color: #ff0000;">6</span>, byrow<span style="color: #080;">=</span>TRUE<span style="color: #080;">&#41;</span> 
&nbsp;
opt.<span style="">rhs</span> <span style="color: #080;">&lt;-</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/matrix.html"><span style="color: #0000FF; font-weight: bold;">matrix</span></a><span style="color: #080;">&#40;</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">1</span>, <span style="color: #ff0000;">0.000001</span>, <span style="color: #ff0000;">0.000001</span>, <span style="color: #ff0000;">0.000001</span>, <span style="color: #ff0000;">0.000001</span>, <span style="color: #ff0000;">0.000001</span><span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span> 
&nbsp;
opt.<span style="">meq</span> <span style="color: #080;">&lt;-</span> <span style="color: #ff0000;">1</span> <span style="color: #228B22;"># first constraint is '=', rest are '&gt;=' </span>
&nbsp;
zeros <span style="color: #080;">&lt;-</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/array.html"><span style="color: #0000FF; font-weight: bold;">array</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;"></span>, <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/dim.html"><span style="color: #0000FF; font-weight: bold;">dim</span></a> <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>nAssets,<span style="color: #ff0000;">1</span><span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span> 
&nbsp;
solution.<span style="">minvol</span> <span style="color: #080;">&lt;-</span> solve.<span style="">QP</span><span style="color: #080;">&#40;</span>covmatrix, zeros, <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/t.html"><span style="color: #0000FF; font-weight: bold;">t</span></a><span style="color: #080;">&#40;</span>opt.<span style="">constraints</span><span style="color: #080;">&#41;</span>, opt.<span style="">rhs</span>, meq <span style="color: #080;">=</span> opt.<span style="">meq</span><span style="color: #080;">&#41;</span> 
&nbsp;
wts.<span style="">minvol</span> <span style="color: #080;">=</span> solution.<span style="">minvol</span>$solution 
var.<span style="">minvol</span> <span style="color: #080;">=</span> solution.<span style="">minvol</span>$value <span style="color: #080;">*</span><span style="color: #ff0000;">2</span> 
ret.<span style="">minvol</span> <span style="color: #080;">=</span> realreturns <span style="color: #080;">%*%</span> wts.<span style="">minvol</span> 
vol.<span style="">minvol</span> <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/sqrt.html"><span style="color: #0000FF; font-weight: bold;">sqrt</span></a><span style="color: #080;">&#40;</span>var.<span style="">minvol</span><span style="color: #080;">&#41;</span> 
&nbsp;
&nbsp;
&nbsp;
<span style="color: #228B22;">################################################################################</span>
&nbsp;
&nbsp;
<span style="color: #228B22;"># generate a sequence of 50 evenly spaced returns between min var return and max return </span>
lowreturn<span style="color: #080;">=</span>ret.<span style="">minvol</span> 
highreturn<span style="color: #080;">=</span>ret.<span style="">maxret</span> 
minreturns<span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/seq.html"><span style="color: #0000FF; font-weight: bold;">seq</span></a><span style="color: #080;">&#40;</span>lowreturn, highreturn, length.<span style="">out</span><span style="color: #080;">=</span><span style="color: #ff0000;">50</span><span style="color: #080;">&#41;</span> 
&nbsp;
<span style="color: #228B22;"># add a return constraint: sum of weight * return &gt;= x </span>
retconst<span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/rbind.html"><span style="color: #0000FF; font-weight: bold;">rbind</span></a><span style="color: #080;">&#40;</span>opt.<span style="">constraints</span>, realreturns<span style="color: #080;">&#41;</span> 
retrhs<span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/rbind.html"><span style="color: #0000FF; font-weight: bold;">rbind</span></a><span style="color: #080;">&#40;</span>opt.<span style="">rhs</span>, ret.<span style="">minvol</span><span style="color: #080;">&#41;</span> 
&nbsp;
<span style="color: #228B22;"># create vectors for the returns, vols, and weights along the frontier, </span>
<span style="color: #228B22;"># starting with the minvol portfolio </span>
out.<span style="">ret</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>ret.<span style="">minvol</span><span style="color: #080;">&#41;</span> 
out.<span style="">vol</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>vol.<span style="">minvol</span><span style="color: #080;">&#41;</span> 
out.<span style="">stocks</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>wts.<span style="">minvol</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">1</span><span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span> 
out.<span style="">bills</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>wts.<span style="">minvol</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">2</span><span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span> 
out.<span style="">bonds</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>wts.<span style="">minvol</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">3</span><span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span> 
out.<span style="">gold</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>wts.<span style="">minvol</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">4</span><span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span> 
out.<span style="">gdp</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>wts.<span style="">minvol</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">5</span><span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span> 
&nbsp;
<span style="color: #228B22;"># loop and run a minimum volatility optimization for each return level from 2-49 </span>
<a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/for.html"><span style="color: #0000FF; font-weight: bold;">for</span></a><span style="color: #080;">&#40;</span>i <span style="color: #0000FF; font-weight: bold;">in</span> <span style="color: #ff0000;">2</span><span style="color: #080;">:</span><span style="color: #080;">&#40;</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/length.html"><span style="color: #0000FF; font-weight: bold;">length</span></a><span style="color: #080;">&#40;</span>minreturns<span style="color: #080;">&#41;</span> <span style="color: #080;">-</span> <span style="color: #ff0000;">1</span><span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span>
<span style="color: #080;">&#123;</span>
<a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/print.html"><span style="color: #0000FF; font-weight: bold;">print</span></a><span style="color: #080;">&#40;</span>i<span style="color: #080;">&#41;</span>
<span style="color: #228B22;"># start with existing constraints, no return constraint</span>
tmp.<span style="">constraints</span> <span style="color: #080;">=</span> retconst
tmp.<span style="">rhs</span><span style="color: #080;">=</span>retrhs
<span style="color: #228B22;"># set return constraint</span>
tmp.<span style="">rhs</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">7</span><span style="color: #080;">&#93;</span> <span style="color: #080;">=</span> minreturns<span style="color: #080;">&#91;</span>i<span style="color: #080;">&#93;</span>
tmpsol <span style="color: #080;">&lt;-</span> solve.<span style="">QP</span><span style="color: #080;">&#40;</span>covmatrix, zeros, <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/t.html"><span style="color: #0000FF; font-weight: bold;">t</span></a><span style="color: #080;">&#40;</span>tmp.<span style="">constraints</span><span style="color: #080;">&#41;</span>, tmp.<span style="">rhs</span>, meq <span style="color: #080;">=</span> opt.<span style="">meq</span><span style="color: #080;">&#41;</span>
tmp.<span style="">wts</span> <span style="color: #080;">=</span> tmpsol$solution
tmp.<span style="">var</span> <span style="color: #080;">=</span> tmpsol$value <span style="color: #080;">*</span><span style="color: #ff0000;">2</span>
out.<span style="">ret</span><span style="color: #080;">&#91;</span>i<span style="color: #080;">&#93;</span> <span style="color: #080;">=</span> realreturns <span style="color: #080;">%*%</span> tmp.<span style="">wts</span>
out.<span style="">vol</span><span style="color: #080;">&#91;</span>i<span style="color: #080;">&#93;</span> <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/sqrt.html"><span style="color: #0000FF; font-weight: bold;">sqrt</span></a><span style="color: #080;">&#40;</span>tmp.<span style="">var</span><span style="color: #080;">&#41;</span>
out.<span style="">stocks</span><span style="color: #080;">&#91;</span>i<span style="color: #080;">&#93;</span><span style="color: #080;">=</span>tmp.<span style="">wts</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">1</span><span style="color: #080;">&#93;</span>
out.<span style="">bills</span><span style="color: #080;">&#91;</span>i<span style="color: #080;">&#93;</span><span style="color: #080;">=</span>tmp.<span style="">wts</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">2</span><span style="color: #080;">&#93;</span>
out.<span style="">bonds</span><span style="color: #080;">&#91;</span>i<span style="color: #080;">&#93;</span><span style="color: #080;">=</span>tmp.<span style="">wts</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">3</span><span style="color: #080;">&#93;</span>
out.<span style="">gold</span><span style="color: #080;">&#91;</span>i<span style="color: #080;">&#93;</span><span style="color: #080;">=</span>tmp.<span style="">wts</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">4</span><span style="color: #080;">&#93;</span>
out.<span style="">gdp</span><span style="color: #080;">&#91;</span>i<span style="color: #080;">&#93;</span><span style="color: #080;">=</span>tmp.<span style="">wts</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">5</span><span style="color: #080;">&#93;</span>
&nbsp;
<span style="color: #080;">&#125;</span> 
&nbsp;
<span style="color: #228B22;"># put maxreturn portfolio in return series for max return, index =50 </span>
out.<span style="">ret</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">50</span><span style="color: #080;">&#93;</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>ret.<span style="">maxret</span><span style="color: #080;">&#41;</span> 
out.<span style="">vol</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">50</span><span style="color: #080;">&#93;</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>vol.<span style="">maxret</span><span style="color: #080;">&#41;</span> 
out.<span style="">stocks</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">50</span><span style="color: #080;">&#93;</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>wts.<span style="">maxret</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">1</span><span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span> 
out.<span style="">bills</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">50</span><span style="color: #080;">&#93;</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>wts.<span style="">maxret</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">2</span><span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span> 
out.<span style="">bonds</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">50</span><span style="color: #080;">&#93;</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>wts.<span style="">maxret</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">3</span><span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span> 
out.<span style="">gold</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">50</span><span style="color: #080;">&#93;</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>wts.<span style="">maxret</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">4</span><span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span> 
out.<span style="">gdp</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">50</span><span style="color: #080;">&#93;</span><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>wts.<span style="">maxret</span><span style="color: #080;">&#91;</span><span style="color: #ff0000;">5</span><span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span> 
&nbsp;
<span style="color: #228B22;"># organize in a data frame </span>
efrontier<span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/data.frame.html"><span style="color: #0000FF; font-weight: bold;">data.<span style="">frame</span></span></a><span style="color: #080;">&#40;</span>out.<span style="">ret</span><span style="color: #080;">*</span><span style="color: #ff0000;">100</span><span style="color: #080;">&#41;</span> 
efrontier$vol<span style="color: #080;">=</span>out.<span style="">vol</span><span style="color: #080;">*</span><span style="color: #ff0000;">100</span> 
efrontier$stocks<span style="color: #080;">=</span>out.<span style="">stocks</span><span style="color: #080;">*</span><span style="color: #ff0000;">100</span> 
efrontier$bills<span style="color: #080;">=</span>out.<span style="">bills</span><span style="color: #080;">*</span><span style="color: #ff0000;">100</span> 
efrontier$bonds<span style="color: #080;">=</span>out.<span style="">bonds</span><span style="color: #080;">*</span><span style="color: #ff0000;">100</span> 
efrontier$gold<span style="color: #080;">=</span>out.<span style="">gold</span><span style="color: #080;">*</span><span style="color: #ff0000;">100</span> 
efrontier$gdp<span style="color: #080;">=</span>out.<span style="">gdp</span><span style="color: #080;">*</span><span style="color: #ff0000;">100</span> 
<a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/names.html"><span style="color: #0000FF; font-weight: bold;">names</span></a><span style="color: #080;">&#40;</span>efrontier<span style="color: #080;">&#41;</span> <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">"Return"</span>, <span style="color: #ff0000;">"Risk"</span>, <span style="color: #ff0000;">"%Stocks"</span>, <span style="color: #ff0000;">"%Bills"</span>, <span style="color: #ff0000;">"%Bonds"</span>, <span style="color: #ff0000;">"%Gold"</span>, <span style="color: #ff0000;">"%GDP"</span><span style="color: #080;">&#41;</span>
&nbsp;
&nbsp;
<span style="color: #228B22;">################################################################################</span>
&nbsp;
<span style="color: #228B22;"># define colors </span>
dvblue <span style="color: #080;">=</span> <span style="color: #ff0000;">"#000099"</span> 
dvred <span style="color: #080;">=</span> <span style="color: #ff0000;">"#e41a1c"</span> 
dvgreen <span style="color: #080;">=</span> <span style="color: #ff0000;">"#4daf4a"</span> 
dvpurple <span style="color: #080;">=</span> <span style="color: #ff0000;">"#984ea3"</span> 
dvorange <span style="color: #080;">=</span> <span style="color: #ff0000;">"#ff7f00"</span> 
dvyellow <span style="color: #080;">=</span> <span style="color: #ff0000;">"#ffff33"</span> 
dvgray<span style="color: #080;">=</span><span style="color: #ff0000;">"#666666"</span>   
&nbsp;
apoints<span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/data.frame.html"><span style="color: #0000FF; font-weight: bold;">data.<span style="">frame</span></span></a><span style="color: #080;">&#40;</span>realsdspct<span style="color: #080;">&#41;</span> 
apoints$realreturns <span style="color: #080;">=</span> realreturnspct 
ggplot<span style="color: #080;">&#40;</span><span style="color: #0000FF; font-weight: bold;">data</span><span style="color: #080;">=</span>efrontier, aes<span style="color: #080;">&#40;</span>x<span style="color: #080;">=</span>Risk, y<span style="color: #080;">=</span>Return<span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> opts<span style="color: #080;">&#40;</span><a href="http://astrostatistics.psu.edu/su07/R/html/stats/html/title.html"><span style="color: #0000FF; font-weight: bold;">title</span></a><span style="color: #080;">=</span><span style="color: #ff0000;">"Efficient Frontier"</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> theme_bw<span style="color: #080;">&#40;</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> geom_line<span style="color: #080;">&#40;</span>size<span style="color: #080;">=</span><span style="color: #ff0000;">1.4</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> geom_point<span style="color: #080;">&#40;</span>aes<span style="color: #080;">&#40;</span>x<span style="color: #080;">=</span>apoints$realsdspct, y<span style="color: #080;">=</span>apoints$realreturns<span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> scale_x_continuous<span style="color: #080;">&#40;</span>limits<span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">1</span>,<span style="color: #ff0000;">24</span><span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> annotate<span style="color: #080;">&#40;</span><span style="color: #ff0000;">"text"</span>, apoints<span style="color: #080;">&#91;</span><span style="color: #ff0000;">1</span>,<span style="color: #ff0000;">1</span><span style="color: #080;">&#93;</span>, apoints<span style="color: #080;">&#91;</span><span style="color: #ff0000;">1</span>,<span style="color: #ff0000;">2</span><span style="color: #080;">&#93;</span>,label<span style="color: #080;">=</span><span style="color: #ff0000;">" stocks"</span>, hjust<span style="color: #080;">=</span><span style="color: #ff0000;"></span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> annotate<span style="color: #080;">&#40;</span><span style="color: #ff0000;">"text"</span>, apoints<span style="color: #080;">&#91;</span><span style="color: #ff0000;">2</span>,<span style="color: #ff0000;">1</span><span style="color: #080;">&#93;</span>, apoints<span style="color: #080;">&#91;</span><span style="color: #ff0000;">2</span>,<span style="color: #ff0000;">2</span><span style="color: #080;">&#93;</span>,label<span style="color: #080;">=</span><span style="color: #ff0000;">" bills"</span>, hjust<span style="color: #080;">=</span><span style="color: #ff0000;"></span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> annotate<span style="color: #080;">&#40;</span><span style="color: #ff0000;">"text"</span>, apoints<span style="color: #080;">&#91;</span><span style="color: #ff0000;">3</span>,<span style="color: #ff0000;">1</span><span style="color: #080;">&#93;</span>, apoints<span style="color: #080;">&#91;</span><span style="color: #ff0000;">3</span>,<span style="color: #ff0000;">2</span><span style="color: #080;">&#93;</span>,label<span style="color: #080;">=</span><span style="color: #ff0000;">" bonds"</span>, hjust<span style="color: #080;">=</span><span style="color: #ff0000;"></span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> annotate<span style="color: #080;">&#40;</span><span style="color: #ff0000;">"text"</span>, apoints<span style="color: #080;">&#91;</span><span style="color: #ff0000;">4</span>,<span style="color: #ff0000;">1</span><span style="color: #080;">&#93;</span>, apoints<span style="color: #080;">&#91;</span><span style="color: #ff0000;">4</span>,<span style="color: #ff0000;">2</span><span style="color: #080;">&#93;</span>,label<span style="color: #080;">=</span><span style="color: #ff0000;">" gold"</span>, hjust<span style="color: #080;">=</span><span style="color: #ff0000;"></span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> annotate<span style="color: #080;">&#40;</span><span style="color: #ff0000;">"text"</span>, apoints<span style="color: #080;">&#91;</span><span style="color: #ff0000;">5</span>,<span style="color: #ff0000;">1</span><span style="color: #080;">&#93;</span>, apoints<span style="color: #080;">&#91;</span><span style="color: #ff0000;">5</span>,<span style="color: #ff0000;">2</span><span style="color: #080;">&#93;</span>,label<span style="color: #080;">=</span><span style="color: #ff0000;">" gdp"</span>, hjust<span style="color: #080;">=</span><span style="color: #ff0000;"></span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> annotate<span style="color: #080;">&#40;</span><span style="color: #ff0000;">"text"</span>, <span style="color: #ff0000;">19</span>,<span style="color: #ff0000;">0.3</span>,label<span style="color: #080;">=</span><span style="color: #ff0000;">"streeteye.com"</span>, hjust<span style="color: #080;">=</span><span style="color: #ff0000;"></span>, alpha<span style="color: #080;">=</span><span style="color: #ff0000;">0.5</span><span style="color: #080;">&#41;</span> 
&nbsp;
<span style="color: #228B22;">################################################################################</span>
&nbsp;
&nbsp;
keep<span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">"Risk"</span>, <span style="color: #ff0000;">"%Stocks"</span>,<span style="color: #ff0000;">"%Bills"</span>,<span style="color: #ff0000;">"%Bonds"</span>,<span style="color: #ff0000;">"%Gold"</span>, <span style="color: #ff0000;">"%GDP"</span><span style="color: #080;">&#41;</span> 
efrontier.<span style="">tmp</span> <span style="color: #080;">=</span> efrontier<span style="color: #080;">&#91;</span>keep<span style="color: #080;">&#93;</span> 
efrontier.<span style="">m</span> <span style="color: #080;">=</span> melt<span style="color: #080;">&#40;</span>efrontier.<span style="">tmp</span>, id <span style="color: #080;">=</span><span style="color: #ff0000;">'Risk'</span><span style="color: #080;">&#41;</span> 
&nbsp;
ggplot<span style="color: #080;">&#40;</span><span style="color: #0000FF; font-weight: bold;">data</span><span style="color: #080;">=</span>efrontier.<span style="">m</span>, aes<span style="color: #080;">&#40;</span>x<span style="color: #080;">=</span>Risk, y<span style="color: #080;">=</span>value, colour<span style="color: #080;">=</span>variable, fill<span style="color: #080;">=</span>variable<span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> theme_bw<span style="color: #080;">&#40;</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> opts<span style="color: #080;">&#40;</span><a href="http://astrostatistics.psu.edu/su07/R/html/stats/html/title.html"><span style="color: #0000FF; font-weight: bold;">title</span></a><span style="color: #080;">=</span><span style="color: #ff0000;">"Transition Map"</span>, legend.<span style="">position</span><span style="color: #080;">=</span><span style="color: #ff0000;">"top"</span>, legend.<span style="">direction</span><span style="color: #080;">=</span><span style="color: #ff0000;">"horizontal"</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> ylab<span style="color: #080;">&#40;</span><span style="color: #ff0000;">'% Portfolio'</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> geom_area<span style="color: #080;">&#40;</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> scale_colour_manual<span style="color: #080;">&#40;</span><span style="color: #ff0000;">""</span>, breaks<span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">"%Stocks"</span>, <span style="color: #ff0000;">"%Bills"</span>, <span style="color: #ff0000;">"%Bonds"</span>,<span style="color: #ff0000;">"%Gold"</span>,<span style="color: #ff0000;">"%GDP"</span><span style="color: #080;">&#41;</span>, values <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>dvblue,dvgreen,dvred,dvyellow,dvgray<span style="color: #080;">&#41;</span>, <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/labels.html"><span style="color: #0000FF; font-weight: bold;">labels</span></a><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">'%Stocks'</span>, <span style="color: #ff0000;">'%Bills'</span>,<span style="color: #ff0000;">'%Bonds'</span>,<span style="color: #ff0000;">'%Gold'</span>,<span style="color: #ff0000;">'%GDP'</span><span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> scale_fill_manual<span style="color: #080;">&#40;</span><span style="color: #ff0000;">""</span>, breaks<span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">"%Stocks"</span>, <span style="color: #ff0000;">"%Bills"</span>, <span style="color: #ff0000;">"%Bonds"</span>,<span style="color: #ff0000;">"%Gold"</span>,<span style="color: #ff0000;">"%GDP"</span><span style="color: #080;">&#41;</span>, values <span style="color: #080;">=</span> <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span>dvblue,dvgreen,dvred,dvyellow,dvgray<span style="color: #080;">&#41;</span>, <a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/labels.html"><span style="color: #0000FF; font-weight: bold;">labels</span></a><span style="color: #080;">=</span><a href="http://astrostatistics.psu.edu/su07/R/html/graphics/html/c.html"><span style="color: #0000FF; font-weight: bold;">c</span></a><span style="color: #080;">&#40;</span><span style="color: #ff0000;">'%Stocks'</span>, <span style="color: #ff0000;">'%Bills'</span>,<span style="color: #ff0000;">'%Bonds'</span>,<span style="color: #ff0000;">'%Gold'</span>,<span style="color: #ff0000;">'%GDP'</span><span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span> <span style="color: #080;">+</span> annotate<span style="color: #080;">&#40;</span><span style="color: #ff0000;">"text"</span>, <span style="color: #ff0000;">16</span>,<span style="color: #080;">-</span><span style="color: #ff0000;">2.5</span>,label<span style="color: #080;">=</span><span style="color: #ff0000;">"streeteye.com"</span>, hjust<span style="color: #080;">=</span><span style="color: #ff0000;"></span>, alpha<span style="color: #080;">=</span><span style="color: #ff0000;">0.5</span><span style="color: #080;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

  </div>


  <div class="page-navigation">
    
      <a class="prev" href="/2014/10/easy-pieces-on-risk-2-visualizing-diversification-with-risk-triangles/">&larr; Risk: Visualizing Diversification With Risk Triangles</a>
    

    
      <a class="next" href="/2015/01/uberfail-a-few-thoughts-on-uber/">UberFail _ a few thoughts on Uber &rarr;</a>
    
  </div>

  

</article>

      </div>
    </main>

    <div style="clear: both;"/>
<footer class="site-footer">
    2019 &copy; Built by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a> and <a href="https://github.com/jekyll/minima/" target="_blank">minima</a> | View <a href="https://github.com/druce/druce.github.io" target="_blank">this</a> on Github | <a href="/tags.html">Tags</a> | <a href="/contact.html">Contact</a> | <a href="/FAQ.html">FAQ</a>

    <p>
        <a href="/feed.xml" target="_blank">
            <img src="/assets/images/logo_rss.png" />
        </a>
        <a href="https://twitter.com/streeteye/" target="_blank">
            <img src="/assets/images/logo_twitter.png" />
        </a>
        <a href="https://github.com/druce" target="_blank">
            <img src="/assets/images/logo_github.png" />
        </a>
        <a href="https://www.linkedin.com/in/drucevertes" target="_blank">
            <img src="/assets/images/logo_github.png" />
        </a>
	
    </p>
</footer>


  </body>

</html>
